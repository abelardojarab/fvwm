## vim: sts=0:noet:syntax=fvwm:foldmethod=marker

SetEnv fvwm_wallpaper $[HOME]/workspace/fvwm/.fvwm/images/wallpapers/osxelcapitan.png
SetEnv fvwm_cache $[HOME]/.fvwm.cache
SetEnv fvwm_userdir $[HOME]/.fvwm
Setenv fvwm_colors $[HOME]/.fvwm/images/icons/colors

# Pixmap
ImagePath $[fvwm_userdir]/images:$[fvwm_userdir]/images/icons:$[fvwm_userdir]/images/icons/decorations:$[fvwm_userdir]/images/bar:$[fvwm_userdir]/images/tiles:$[fvwm_userdir]/images/buttons:$[fvwm_userdir]/images/actions:[fvwm_userdir]/images/mini:/usr/share/icons/fvwm:/usr/share/icons/hicolor/16x16/apps:/usr/share/icons/HighContrast/scalable/apps-extra:/usr/share/icons/icons/hicolor/16x16/apps:/usr/share/icons/oxygen/16x16/apps:/usr/share/icons/oxygen/16x16/actions:/usr/share/icons/gnome/16x16/apps:/usr/share/icons/gnome/16x16/mimetypes:/usr/share/icons/oxygen/16x16/categories:/usr/share/icons/hicolor/scalable/apps:/usr/share/icons/HighContrast/16x16/apps:/usr/share/icons/locolor/16x16/apps:$[fvwm_userdir]/images/icons/apps:$[fvwm_userdir]/images/icons/actions:$[fvwm_userdir]/images/icons/xpms
IconPath  $[fvwm_userdir]/images:$[fvwm_userdir]/images/icons:$[fvwm_userdir]/images/icons/decorations:$[fvwm_userdir]/images/bar:$[fvwm_userdir]/images/tiles:$[fvwm_userdir]/images/buttons:$[fvwm_userdir]/images/actions:[fvwm_userdir]/images/mini:/usr/share/icons/fvwm:/usr/share/icons/hicolor/16x16/apps:/usr/share/icons/HighContrast/scalable/apps-extra:/usr/share/icons/icons/hicolor/16x16/apps:/usr/share/icons/oxygen/16x16/apps:/usr/share/icons/oxygen/16x16/actions:/usr/share/icons/gnome/16x16/apps:/usr/share/icons/gnome/16x16/mimetypes:/usr/share/icons/oxygen/16x16/categories:/usr/share/icons/hicolor/scalable/apps:/usr/share/icons/HighContrast/16x16/apps:/usr/share/icons/locolor/16x16/apps:$[fvwm_userdir]/images/icons/apps:$[fvwm_userdir]/images/icons/actions:$[fvwm_userdir]/images/icons/xpms

# Fonts
InfoStoreAdd font_sans "xft:Aquabase:size=11:encoding=iso10646-1"
InfoStoreAdd font_mono "xft:Roboto-Bold:size=11:encoding=iso10646-1"
DefaultFont "$[infostore.font_mono]"
WindowFont "$[infostore.font_mono]"

######
# Use an arrow rather than the `X` cursor on the root window.
#################
CursorStyle root top_left_arrow
CursorStyle stroke hand2

#####
# Viewport and Virtual Desktop Setup
# You can automatically move the viewport into adjacent pages when the pointer
# hits the screen edge, but I dont like this.
# EdgeThickness disables edge scrolling and EdgeCommand, which I never use.
#################
DeskTopSize 3x3
EdgeScroll 0 0
EdgeThickness 1
EdgeResistance 400

######
# Use colormaps according to Focus, rather than where the Mouse is.
#################
ColormapFocus FollowsFocus

#####
# OpaqueMoveSize allows you to stop Large windows from being moved opaquely,
# I like the effect, and have Cycles to burn, so all windows can use it.
#
# SnapAttraction lets nearby windows snap together, or snap to edges so that they
# are easier to align on your desktop, The default is off, if you set it too large
# it's annoying as hell, 3 pixels is just right.
#################
OpaqueMoveSize -1
SnapAttraction 3 SameType

#####
# http://www.fvwm.org/documentation/faq/#5.5
#################
IgnoreModifiers L2

#####
# 'rubber-band' window-borders when moving and resizing windows.
XORvalue 208
#################

#####
# You can use EwmhBaseStruts to stop Maximised windows, and new windows from obscuring
# TaskBars/ButtonBars or anything else you always want to be visible.
#
# This Setting makes sure my ButtonBar on the left and taskbar along the bottom is always
# visible, if you would like some windows to ignore this setting when being placed or Maximized,
# you can set the EWMHPlacementIgnoreWorkingArea or EWMHMaximizeIgnoreWorkingArea Style options.
#
# you can also use the ewmhiwa flag on ceratin Maximize commands, so you could have one menu
# option for normal maximization, and one for full-screen maximization.
# Syntax: EwmhBaseStruts left right top bottom
#################
EwmhBaseStruts 80 0 0 24

######
# Fvwm uses a default ClickTime of 150ms, which is way too short for me.
# A Click that lasts <= ClickTime is considered a `Click` in functions,
# > ClickTime is a `Hold`.
# Remember that if you have a function that has actions on Click (C) and
# DoubleClick (D), fvwm will have to wait at least this long so it can tell which
# action you are trying to make.
#################
ClickTime 550

# Start function
AddToFunc StartFunction
+ I Test (Init) Exec exec fvwm-root --dither --retain-pixmap $[fvwm_wallpaper]
+ I FvwmButtons
+ I FvwmTaskBar
+ I Module FvwmProxy
+ I Module FvwmCommandS
+ I Module FvwmAnimate
+ I Module FvwmEvent
+ I Module FvwmProxy
+ I Module FvwmButtons -g 126x$[vp.height]-0+0 FvwmShelf
+ I PipeRead "echo Module FvwmButtons -g $$(($[vp.width]-129))x28+0-0 FvwmBar"
+ I Module FvwmButtons -g 18x42+0+-28 DeskControl
# + I FvwmAuto FvwmAutohide -menter FuncAutoEnter
# + I Test (Init) StartHiddenConsole
+ I Test (Restart) All (Iconic) Test (f $[fvwm_cache]/icon.tmp.$[w.id].png) WindowStyle IconOverride, Icon $[fvwm_cache]/icon.tmp.$[w.id].png

# Init function
DestroyFunc InitFunction
AddToFunc   InitFunction
+ I Exec exec xrdb ~/.Xresources
+ I Exec exec feh --bg-scale $[fvwm_wallpaper]
+ I Exec exec trayer --SetDockType true --distance 200 --padding 10 --transparent true --tint a6aaaa --alpha 50 --edge top --align right --expand true --widthtype percent --width 12 --heighttype pixel --height 24 --distancefrom right
+ I Exec exec bash -c 'if [ `getconf LONG_BIT` = "64" ]; then /usr/lib/x86_64-linux-gnu/notify-osd; else /usr/lib/i386-linux-gnu/notify-osd; fi'
+ I Exec exec bash -c 'if [ $DISPLAY = ":99" ]; then insync start; fi'
+ I Exec exec bash -c 'if [ $DISPLAY = ":99" ]; then dropbox start; fi'
+ I Exec exec bash -c 'if [ $DISPLAY = ":99" ]; then google-musicmanager; fi'
+ I Exec exec bash -c 'if [ $DISPLAY = ":99" ]; then hp-systray; fi'
+ I Exec exec conky
+ I Exec exec gnome-do
+ I GotoPage 0 0

# +----------------------------------------------------------+
# | X  X  X                                          X  X  X |
# +----------------------------------------------------------+
# | 1  3  5                                          6  4  2 |
# |                                                          |
#
#
# Vectors are basically just a set of co-ordinates, each button is a grid
# of 100x100 points (or you can use pixels..it's up to you), following
# each vector you must specify a line type:
#
#   @0 Shadow (sh)
#   @1 Hilight (hi)
#   @2 Background (bg)
#   @3 Foreground (fg)
#   @4 Invisible (just move the pointer, dont draw anything)

# Windows
# Pixmaps
Colorset 0 fg white, bg #525252, fgsh #f9f9f9, hi #8f8f8f, sh #454545
# Active
Colorset 1 bg #535454, fg #ffffff, fgsh #f9f9f9 hi #fbfbfb, sh #171717, pixmap btn_bg.png, Tint #464646 70
# Inactive
Colorset 2 bg #444444, fg #d1d2d7, fgsh #f9f9f9, hi #8f8f8f, sh #454545, Tint #464646 20
DestroyDecor MyDecoration
AddToDecor   MyDecoration
+ TitleStyle -- Raised
+ TitleStyle Centered Height 26
+ TitleStyle InActive (Colorset 2 -- Flat ) Active (Colorset 1 -- Flat)
+ AddTitleStyle Active (TiledPixmap tile_solid-1.png) \
    Inactive (TiledPixmap tile_gray.png)
+ ButtonStyle All -- UseTitleStyle
+ ButtonStyle All InActive (Colorset 2 -- Flat) -- HiddenHandles
+ ButtonStyle All Active (Colorset 1  -- Raised)
+ ButtonStyle 1 ActiveUp Vector 4 30x30@3 60x60@3 60x30@4 30x60@3
+ ButtonStyle 1 ActiveDown Vector 4 30x30@3 60x60@3 60x30@4 30x60@3
+ ButtonStyle 1 Inactive Vector 4 30x30@3 60x60@3 60x30@4 30x60@3
+ ButtonStyle 4 ActiveUp Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 4 ActiveDown Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 4 Inactive Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 3 ActiveUp Vector 2 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 3 ActiveDown Vector 2 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 3 Inactive Vector 2 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3
+ ButtonStyle 2 ActiveUp Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3
+ ButtonStyle 2 ActiveDown Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3
+ ButtonStyle 2 Inactive Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3

# These two vectors draw a circle around the vectors above, uncomment
# them and see what you think.
# + AddButtonStyle  All Active Vector 9 80x60@4 80x40@2 60x20@2 40x20@2 20x40@2 20x60@2 40x80@2 60x80@2 80x60@2 -- Flat
# + AddButtonStyle  All Inactive Vector 9 80x60@4 80x40@2 60x20@2 40x20@2 20x40@2 20x60@2 40x80@2 60x80@2 80x60@2 -- Flat

# MWM emulation
# mwm-style border reliefs (less deep than default fvwm) ?
# Maximize button does mwm-inversion thingy
Style "*" MWMBorder, MWMDecor, HintOverride, MWMFunctions, MWMButtons

# Window behavior
Colorset 3 fg #999999, bg black, fgsh #a0a0a0
Colorset 4 fg #a0a0a0, bg black, fgsh #a4a4a4
Style * UseDecor MyDecoration
Style * Colorset 3, HilightColorset 4, MWMFunctions, MWMDecor, HintOverride
Style * DecorateTransient, NakedTransient
Style * WindowShadeSteps 20, WindowShadeScrolls
Style * Font "$[infostore.font_mono]"
Style * HandleWidth 3, BorderWidth 3
Style * BackingStore, SaveUnder
Style * EWMHMiniIconOverride
Style * NoPPosition, NoTransientPPosition

# Eye Candy preference of watching resize live
Style * ResizeOutline, ResizeOpaque

# Horizontal bars that appear on the title bars of sticky windows, for all windows
Style * StippledTitle

# This is another nice Placement Policy, which tries to avoid obscuring existing windows,
# you can set penalties on certain window types so some are less likely to be obscured than
# others. Check the manpage for even more Placement Policies.
Style * SmartPlacement, CleverPlacement, MinOverlapPercentPlacement, TileCascadePlacement
Style * MinOverlapPercentPlacementPenalties 2 5 1 2 0.5 50

# Comment these lines if you dont like Icons to have Titles.
Colorset 5 fg white, bg #a6a6a6, fgsh black
Style * IconBox -5 -290 -134 -5, IconGrid 3 3
Style * IconTitle, IconTitleColorset 5, HilightIconTitleColorset 5
Style * IconFont "$[infostore.font_mono]"
Style * IconBackgroundRelief 0, IconBackGroundColorset 5
Style * StickyIcon

#  Similar focus behavior to xfce/openbox.
Style * SloppyFocus
Style * ClickToFocus
Style * RaiseTransient
Style * LowerTransient
Style * StackTransientParent
Style * EWMHUseStackingOrderHints

# FP-related functions
Style * FPSortWindowlistByFocus

# FPClickToFocus, FPClickDecorToFocus or FPClickIconToFocus, click inside the window, modification, when the icon, the window receives focus.
Style * FPClickToFocus

# Click Raise window (Clicking at the window to raise it)
Style * FPClickRaisesFocused

# FPEnterToFocus, when the pointer enters the window, the window receives focus
Style * FPEnterToFocus

# !Handles, !Borders, !Title
Style "wine"                  FPLenient, NoFuncHint, NoDecorHint, NoOLDecor
Style "conky"                 !Title, Sticky, WindowListSkip, StaysOnBottom, NeverFocus
Style "plank"                 !Title, !Handles, StaysOnTop, Sticky, NeverFocus, WindowListSkip
Style "gkrellm"               !Title, !Handles, StaysOnTop, Sticky, NeverFocus, WindowListSkip, FixedPosition
Style "trayer"                !Title, StaysOnTop, FixedPosition
Style "chromium-browser"      !Title, FPLenient, NoFuncHint, NoDecorHint, NoOLecor, MiniIcon browser.png
Style "libreoffice*"          NoFuncHint
Style "baobab"                MiniIcon baobab.png, EWMHMiniIconOverride, BorderWidth 0, NoTitle, NoHandles
Style "gnome-calculator"      MiniIcon galculator.png, EWMHMiniIconOverride, BorderWidth 0, NoTitle, NoHandles
Style "gedit"                 MiniIcon gedit.png, EWMHMiniIconOverride, BorderWidth 0, NoTitle, NoHandles
Style "nautilus"              MiniIcon folder.png, EWMHMiniIconOverride, BorderWidth 0, NoTitle, NoHandles
Style "pcmanfm"               MiniIcon folder.png, EWMHMiniIconOverride
Style "gimp"                  MiniIcon gimp.png
Style "inkscape"              MiniIcon inkscape.png
Style "emacs"                 MiniIcon emacs24.png
Style "evince"                MiniIcon evince.png
Style "sublime_text"          MiniIcon sublime-text.png
Style "devhelp"               MiniIcon devhelp.png
Style "umbrello"              MiniIcon umbrello.png
Style "zeal"                  MiniIcon zeal.png
Style "atom"                  MiniIcon atom.png
Style "filezilla"             MiniIcon filezilla.png
Style "gitkraken"             MiniIcon qgit.png
Style "dia"                   MiniIcon dia.png
Style "Terminal"              MiniIcon terminal.png
Style "gnome-terminal"        MiniIcon terminal.png
Style "xterm"                 MiniIcon terminal.png
Style "xman"                  Icon xman.xpm, ClickToFocus
Style "xmag"                  Icon mag_glass.xpm, ClickToFocus
Style "xgraph"                Icon graphs.xpm, ClickToFocus
Style "xmosaic"               Color Green/Yellow, ClickToFocus
Style "firefox"               CenterPlacement, MiniIcon firefox.png
Style "*Dialog_popup"         WindowListSkip
Style "gkrellm"               BorderWidth 0, NoTitle, NoHandles

# Buttons
Style "FvwmButtons" WindowListSkip, NeverFocus, NoHandles, NoTitle, StaysOnTop, Sticky
Style "FvwmPager"   BorderWidth 2, NoHandles, NeverFocus, NoTitle, StaysOnTop, Sticky, WindowListSkip, NoIconifiable
Style "FvwmTaskBar" NoTitle, WindowListSkip, CirculateSkip, Sticky, BorderWidth 0, NoHandles, StaysOnTop
Style "FvwmTaskBar" NeverFocus, Layer 0
Style "FvwmShelf"   NoTitle, StaysOnBottom, Sticky, WindowListSkip, CirculateSkip, NeverFocus, FixedSize, NoHandles
Style "DeskControl" NoTitle, NeverFocus, CirculateSkip, WindowListSkip, Sticky, StaysOnBottom, FixedSize, NoHandles

# Windows stay opaque during Move cmnds.
Style * ResizeOpaque
OpaqueMoveSize unlimited

# An even smoother AnimatedMove command.
SetAnimation 20 -.01 0 .01 .02 .03 .05 .08 .13 .18 .24 .3 .37 \
.45 .52 .6 .68 .75 .8 .85 .88 .90 .92 .94 .96 .97 .98 .99 1.0

# Active window
Colorset 6 fg #9a875f, bg #fa875f
# Line separators
Colorset 7 fg #9a875f, bg #181512
# Window colors
Colorset 8 fg #332d29, bg #332d29
# Balloon tooltip colors (fg = font, bg = background)
Colorset 9 fg #181512, bg #9a875f
# Buttons colors
Colorset 10 fg #e0d3d9, bg #484644
# Note: FvwmPager willl be swallowed by FvwmButtons (below)
Colorset 11 pixmap tile_gray.png

*FvwmPagerFont "$[infostore.font_mono]"
*FvwmPager: Colorset * 0
*FvwmPager: HiLightColorset * 10
*FvwmPager: WindowColorsets 8 5
*FvwmPager: BalloonColorset * 6
*FvwmPager: Balloons All
*FvwmPager: MiniIcons
*FvwmPager: Label 0 "0: General"
*FvwmPager: Label 1 "1: Office"
*FvwmPager: Label 2 "2: CAD"
*FvwmPager: Label 3 "3: Other"

# Set up the geometry so that the buttons stack vertically on the left.
*FvwmButtonsFont  "$[infostore.font_mono]"
*FvwmButtons: ButtonGeometry 74x44+0+0
*FvwmButtons: Colorset 10
*FvwmButtons: BoxSize smart
*FvwmButtons: Rows 21
*FvwmButtons: Columns 1
*FvwmButtons: Frame 1
*FvwmButtons(1x2+0+0, Swallow "FvwmPager" 'FvwmPager *')
*FvwmButtons(Size 1x1, Swallow (NoKill, Respawn, UseOld) XClock 'Exec xclock -digital -twentyfour -fg black -bg gray -padding 1 -strftime "%H:%M %a %d %b %Y " &')

*FvwmButtons(Title Home, Icon folder.png, Action 'Exec "PCmanFM" pcmanfm &')
*FvwmButtons(Title Browser, Icon browser.png, Action 'Exec "Firefox" firefox &')
*FvwmButtons(Title Terminal, Icon terminal.png, Action 'Exec "Terminal" gnome-terminal &')
*FvwmButtons(Title Eclipse, Icon eclipse.png, Action 'Exec "Eclipse" eclipse &')
*FvwmButtons(Title Emacs, Icon emacs24.png, Action 'Exec "Emacs Server" emacs &')
*FvwmButtons(Title Sublime, Icon sublime-text.png, Action 'Exec "Sublime Text" sublime_text &')
*FvwmButtons(Title Filezilla, Icon filezilla.png, Action 'Exec "Filezilla" filezilla &')
*FvwmButtons(Title Umbrello, Icon umbrello.png, Action 'Exec "Umbrello" umbrello &')
*FvwmButtons(Title Gitkraken, Icon qgit.png, Action 'Exec "Gitkraken" gitkraken &')
*FvwmButtons(Title VMware, Icon vmware.png, Action 'Exec "VMware" vmware &')
*FvwmButtons(Title Evince, Icon evince.png, Action 'Exec "Evince" evince &')
*FvwmButtons(Title Inkscape, Icon inkscape.png, Action 'Exec "Inkscape" inkscape &')
*FvwmButtons(Title Gimp, Icon gimp.png, Action 'Exec "Gimp" gimp &')
*FvwmButtons(Title Dia, Icon dia.png, Action 'Exec "Dia" dia &')
*FvwmButtons(Title LOWriter, Icon libreoffice-writer.png, Action 'Exec "Writer" libreoffice --writer &')
*FvwmButtons(Title LOCalc, Icon libreoffice-calc.png, Action 'Exec "Calc" libreoffice --calc &')
*FvwmButtons(Size 1x1, Swallow (NoKill, Respawn, UseOld) XBiff 'Exec xbiff &')

# AutoHiding Console
Style HiddenConsole Sticky, WindowListSkip, Notitle, StaysOnTop, !Handles, FixedSize, FixedPosition
Style HiddenConsole WindowShadeSteps 100

#####
# Re-define our own functions
##################

# The letter before the action tells what kind of action triggers the
# command which follows it.
#   I: Immediate
#   M: Motion (user moves the mouse)
#   C: Click
#   H: Hold
#   D: Double-click

# Thumbnail
DestroyFunc Thumbnail
AddToFunc Thumbnail
+ I Raise
+ I SetEnv Icon-$[w.id] $[w.iconfile]
+ I ThisWindow (!Shaded Iconifiable !Iconic) PipeRead \
    "xwd -silent -id $[w.id] | convert -scale $$(($[w.width]/5)) -frame 1x1 \
    -mattecolor black -quality 0 xwd:- png:$[fvwm_cache]/icon.tmp.$[w.id].png \
    && echo Nop"
+ I TestRc (Match) Test (f $[fvwm_icon]/$[w.iconfile], f $[fvwm_cache]/icon.tmp.$[w.id].png) \
    PipeRead "composite -geometry +2+4 \
    $[fvwm_icon]/$[w.iconfile] $[fvwm_cache]/icon.tmp.$[w.id].png \
    $[fvwm_cache]/icon.tmp.$[w.id].png && \
    echo WindowStyle IconOverride, Icon $[fvwm_cache]/icon.tmp.$[w.id].png || echo Nop"
+ I TestRc (NoMatch) WindowStyle IconOverride, Icon $[fvwm_cache]/icon.tmp.$[w.id].png
+ I Iconify

DestroyFunc DeThumbnail
AddToFunc DeThumbnail
+ I PipeRead "echo Test \\(i \\$\\[Icon-$[w.id]\\]\\) WindowStyle Icon \\$\\[Icon-$[w.id]\\]"
+ I TestRc (NoMatch) WindowStyle NoIconOverride, Icon
+ I Exec rm -f $[fvwm_cache]/icon.tmp.$[w.id].png
+ I All (Iconic, CurrentPage) PlaceAgain icon
+ I UnsetEnv Icon-$[w.id]

DestroyFunc ReThumbnail
AddToFunc   ReThumbnail
+ I Iconify
+ I Thumbnail

# FvwmExpose
DestroyFunc FvwmExpose
AddToFunc FvwmExpose
+ I AddToMenu FvwmExposeMenu "e x p o s e" Title
+ I + DynamicPopDownAction DestroyMenu FvwmExposeMenu
+ I All (!Iconic !Shaded AcceptsFocus)\
    PipeRead "echo Raise; \
        xwd -silent -id $[w.id] | convert -scale $$(($[w.width]/10)) -quality 0 xwd:- \
        png:$[fvwm_cache]/tmp/icon.exp.$[w.id].png \
    && echo AddToMenu FvwmExposeMenu \
    %$[fvwm_cache]/tmp/icon.exp.$[w.id].png%\\\'\"$[w.name]\"\\\' WindowID $[w.id] WarpToWindow 50 50 \
        && echo AddToMenu FvwmExposeMenu \\\"\\\" Nop \
    || Nop"
+ I Popup FvwmExposeMenu
+ I Exec exec rm -f $[fvwm_cache]/tmp/icon.exp.*

# Screenshot functions (uses ImageMagick)
DestroyFunc FvwmWindowScreenshot
AddToFunc   FvwmWindowScreenshot
+ I ThisWindow (!Shaded !Iconic Iconifiable) \
  Exec import -window $[w.id] -quality 100 -silent \
  "$[fvwm_cache]/screenshot/screenshot-`date +%F[%R]`.$[w.id].jpg"
+ I Exec notify-send "Window screenshot was taken."

DestroyFunc FvwmDesktopScreenshot
AddToFunc   FvwmDesktopScreenshot
+ I Exec sleep $0; import -window root -quality 100 -silent \
  "$[fvwm_cache]/screenshot/screenshot-`date +%F[%R]`.jpg"
+ I Exec notify-send "Desktop screenshot was taken."

# Autohide console example: [4]http://dev.gentoo.org/~taviso/autohide_console.png
DestroyFunc StartHiddenConsole
AddToFunc StartHiddenConsole
+ I Exec exec rxvt +sb -geometry 144x8+2+0 -name HiddenConsole
+ I Wait HiddenConsole
+ I Autohide HiddenConsole 250 0 N

# Windows manipulation functions
DestroyFunc TopHalfMix
AddToFunc   TopHalfMix
+ I Maximize 100 50 ewmhiwa true

DestroyFunc LeftHalfMix
AddToFunc   LeftHalfMix
+ I Maximize 50 100 -12p ewmhiwa true 100 100

DestroyFunc FullScreen
AddToFunc   FullScreen
+ I Maximize 100 100 ewmhiwa true

DestroyFunc Move-or-Raise
AddToFunc Move-or-Raise
+ I Raise
+ D Maximize-func
+ C Raise
+ C Focus
+ M Move

DestroyFunc Move-or-Iconify
AddToFunc Move-or-Iconify
+ I Raise
+ D Maximize-func
+ M Move
+ C Iconify

DestroyFunc Resize-or-Raise
AddToFunc Resize-or-Raise
+ I Raise
+ D Maximize-func
+ C Raise
+ C Focus
+ M Resize

DestroyFunc Maximize-func
AddToFunc Maximize-func
+ I SetEnv TEMP $[0]
+ I ThisWindow (!Maximized) Maximize 100 -12p ewmhiwa true 100 100, WindowStyle FixedPosition, FixedSize, ResizeHintOverride, State 1 on
+ I TestRc (NoMatch) ThisWindow (Maximized) UnMaximizeWithFS
+ I InfoStoreAdd x_$[w.id] $[w.x]
+ I InfoStoreAdd y_$[w.id] $[w.y]
+ I InfoStoreAdd width_$[w.id] $[w.width]
+ I InfoStoreAdd height_$[w.id] $[w.height]
+ I Test (EnvMatch TEMP animate) \
        SendToModule FvwmAnimate animate \
    $[w.x] $[w.y] $[w.width] $[w.height] \
    0 0 $[vp.width] $[vp.height]
+ I UnsetEnv TEMP

DestroyFunc MaximizeWithFS
AddToFunc   MaximizeWithFS
+ I WindowStyle !Borders, !Handles, BorderWidth 0, HandleWidth 0, !Title, ResizeHintOverride
+ I UpdateStyles
+ I State 1 on
+ I Maximize $*

DestroyFunc UnMaximizeWithFS
AddToFunc   UnMaximizeWithFS
+ I Maximize
+ I State 1 off
+ I DestroyWindowStyle
+ I UpdateStyles
+ I Raise
+ I UpdateStyles

# Wheel scrolling function
DestroyFunc WheelScroll
AddToFunc WheelScroll I PipeRead 'case $0 in \
      up) test $[page.ny] -eq $$(($[desk.pagesy]-1)) -a $[page.nx] -lt $$(($[desk.pagesx]-1)) \
         && echo GotoPage +1p 0 \
         || echo GotoPage 0p +1p;; \
      down) test $[page.ny] -eq 0 -a $[page.nx] -gt 0 \
         && echo GotoPage -1p $$(($[desk.pagesy]-1)) \
         || echo GotoPage 0p -1p;; \
   esac'

# Show desktop function
DestroyFunc ShowDesktop
AddToFunc ShowDesktop
+  I All (AcceptsFocus CurrentPage !Iconic !Shaded !ButtonDocks) Iconify

# These functions modified from the functions provided in the fvwm FAQ.
AddToFunc Autohide
+ I ThisWindow ($0) Deschedule $[w.id]
+ I TestRc (!Match) Deschedule -$[w.id]
+ I ThisWindow ($0) ThisWindow (shaded) AutohideShow $1 $3
+ I TestRc (!Match) All ($0, !shaded) AutohideHide $2 $3

AddToFunc AutohideShow
+ I Schedule $0 -$[w.id] WindowShade $1 off
+ I Schedule $0 -$[w.id] Raise
+ I Schedule $0 -$[w.id] Deschedule $[w.id]
+ I Schedule $0 -$[w.id] Deschedule -$[w.id]

AddToFunc AutohideHide
+ I Schedule $0 $[w.id] WindowShade $1 on
+ I Schedule $0 $[w.id] Deschedule $[w.id]
+ I Schedule $0 $[w.id] Deschedule -$[w.id]

# Used by the WindowList command. Replaces the builtin function.
DestroyFunc WindowListFunc
AddToFunc WindowListFunc
+ I ThisWindow (Iconic) DeIconifyWindow
+ I ThisWindow FlipFocus NoWarp
+ I ThisWindow Raise
+ I ThisWindow (FvwmButtons) WarpToWindow 30 30

# Used by the HiddenConsole
DestroyFunc FuncAutoEnter
AddToFunc FuncAutoEnter I Autohide HiddenConsole 250 500 N

## WindowList Bindings
## Alt + Tab: Switch focus to the next non-iconic window
Key Tab A M WindowList (CurrentDesk, AcceptsFocus, !Iconic) Root c c \
  NoCurrentDeskTitle, NoGeometry, CurrentAtEnd, \
  IconifiedAtEnd, MaxLabelWidth 60, SelectOnRelease Meta_L

## Shift + Alt + Tab: Switch focus to the previous non-iconic window
Key Tab A SM WindowList (CurrentDesk, AcceptsFocus, !Iconic) Root c c \
  NoCurrentDeskTitle, NoGeometry, CurrentAtEnd, ReverseOrder, \
  IconifiedAtEnd, MaxLabelWidth 60, SelectOnRelease Meta_L

## Super + Tab: Switch focus and deiconify the next iconic window
Key Tab A 4 WindowList (CurrentDesk, Iconic) Root c c \
  NoCurrentDeskTitle, NoGeometry, ReverseOrder, MaxLabelWidth 60, \
  SelectOnRelease Super_L

## Shift + Super_L + Tab:  Switch focus and deiconify the next iconic window
Key Tab A S4 WindowList (CurrentDesk, Iconic) Root c c \
  NoCurrentDeskTitle, NoGeometry, MaxLabelWidth 60, \
  SelectOnRelease Super_L

#####
# Define our own configurations
##################

# FvwmProxy allows to see all windows
DestroyModuleConfig FvwmProxy: *
*FvwmProxy: Font "xft:snap; $[infostore.font_mono]"
*FvwmProxy: ProxyMove false

# FvwmIdent is an xwininfo replacement.
DestroyModuleConfig FvwmIdent: *
*FvwmIdent: Back MidnightBlue
*FvwmIdent: Fore #f6f6f6
*FvwmIdent: Font "xft:snap"

# FvwmScroll swallows applications into smaller containers.
DestroyModuleConfig FvwmScroll: *
*FvwmScroll: Back #f6f6f6
*FvwmScroll: Fore #f6f6f6

# FIXME: This will destroy all Windowstyle settings.
# FvwmEvent
DestroyModuleConfig FvwmEvent: *
*FvwmEvent: deiconify DeThumbnail
*FvwmEvent: add_window NewWindowFunc
*FvwmEvent: new_desk "SendToModule DeskControl ChangeButton desk Title $$[desk.n]"

# Makes a window "dance"
DestroyFunc Jiggle
AddToFunc Jiggle
+ I PipeRead "for ((y=$0;y>=0;y--)) do \
    printf 'AnimatedMove w+%up w+%up\\nAnimatedMove w-%up w-%up\\n' \
    ${y} ${y} ${y} ${y}; done"

# Used when new window pops up (for special events)
DestroyFunc NewWindowFunc
AddToFunc NewWindowFunc
+ I ThisWindow (xmessage) Jiggle 5

# Animations are controlled by this module
# You could also use Frame, Lines, Turn, Twist, Random and None
DestroyModuleConfig FvwmAnimate: *
*FvwmAnimate: Effect Flip
*FvwmAnimate: Delay 0
*FvwmAnimate: Iterations 30
*FvwmAnimate: Twist 1
*FvwmAnimate: Width 2

# Icon Manager
DestroyModuleConfig FvwmIconMan
*FvwmIconMan: NumManagers 1
*FvwmIconMan: Colorset 40
*FvwmIconMan: DrawIcons false
*FvwmIconMan: FocusAndSelectButton flat
*FvwmIconMan: FocusAndSelectColorset 40
*FvwmIconMan: FocusButton flat
*FvwmIconMan: FocusColorset 40
*FvwmIconMan: Font "$[infostore.font_mono]"
*FvwmIconMan: Format %t
*FvwmIconMan: IconButton flat
*FvwmIconMan: IconColorset 40
*FvwmIconMan: ManagerGeometry 1x20
*FvwmIconMan: PlainButton flat
*FvwmIconMan: PlainColorset 40
*FvwmIconMan: Resolution page
*FvwmIconMan: SelectButton flat
*FvwmIconMan: SelectColorset 40
*FvwmIconMan: Sort id
*FvwmIconMan: UseWinList true
*FvwmIconMan: Tips false
*FvwmIconMan: ReliefThickness 0
*FvwmIconMan: Title ""
*FvwmIconMan: Action   Mouse   1  N sendcommand Raise
*FvwmIconMan: Action   Mouse   2  N sendcommand 'WindowShade toggle'
*FvwmIconMan: Action   Mouse   3  N sendcommand Iconify
*FvwmIconMan: ButtonGeometry 150x20
*FvwmIconMan: MaxButtonWidth 300

# Window Operation Menu
DestroyMenu Window-Ops
AddToMenu Window-Ops "Window Operations"        Title
+ "Windows list...%xpms/mini.windows.xpm%"      WindowList                 (CurrentDesk, AcceptsFocus, !Iconic) Root c c \
  NoGeometry IconifiedAtEnd, MaxLabelWidth 60
+ ""                                            Nop
+ "Resize%xpms/mini.resize.xpm%"                Resize
+ "Top Half%xpms/mini.maximize-horiz.xpm%"      TopHalfMix
+ "Left Half%xpms/mini.maximize-vert.xpm%"      LeftHalfMix
+ ""                                            Nop
+ "(De) Iconify%xpms/mini.iconify.xpm%"         Iconify
+ "(Un) Maximize%xpms/mini.maximize1.xpm%"      Maximize-func
+ "(Un) Thumbnail%xpms/mini.zoom.xpm%"          Thumbnail
+ "(Un) Shade%xpms/mini.windowshade.xpm%"       WindowShade
+ "(Un) Stick%xpms/mini.stick1.xpm%"            Stick
+ ""                                            Nop
+ "Move%actions/move.png%"                      Move
+ "Close%xpms/small.exit.xpm%"                  Close
+ "Delete%xpms/mini.delete.xpm%"                Delete
+ "Destroy%xpms/mini.destroy.xpm%"              Destroy
+ ""                                            Nop
+ "Stays On Top%xpms/mini.raise3.xpm%"          Pick                       (CirculateHit) Layer 0 6
+ "Layer +1%xpms/mini.raise2.xpm%"              Pick                       (CirculateHit) Layer +1
+ "Stays Put%actions/nontop.png%"               Pick                       (CirculateHit) Layer 0 4
+ "Layer -1%xpms/mini.lower2.xpm%"              Pick                       (CirculateHit) Layer -1
+ "Stays On Bottom%xpms/mini.lower3.xpm%"       Pick                       (CirculateHit) Layer 0 2
+ ""                                            Nop
+ "%xpms/mini.window.xpm%Window Screenshot"     Pick                       (CirculateHit) FvwmWindowScreenshot
+ "%xpms/mini.desktop.xpm%Desktop Screenshot"   FvwmDesktopScreenshot      5
+ "Identify%xpms/mini.question.xpm%"            Module                     FvwmIdent
+ ""                                            Nop
+ "Modules%xpms/mini.modules.xpm%"              Popup                      MenuFvwmModules
+ "Send To...%xpms/mini.pager.xpm%"             Popup                      MenuPageList

DestroyMenu MenuFvwmModules
AddToMenu MenuFvwmModules
+ "%xpms/mini.fvwm.xpm%Banner"                  Module                     FvwmBanner
+ "%xpms/mini.desktop.xpm%Expose"               Module                     FvwmExpose
+ "%xpms/mini.xterm.xpm%Quake-style Console"    Module                     StartHiddenConsole
+ ""                                            Nop
+ "%xpms/small.exit.xpm%Stop modules"           Popup                      MenuFvwmStopModule

DestroyMenu MenuFvwmStopModule
AddToMenu MenuFvwmStopModule
+ "%xpms/mini.xterm.xpm%Stop Quake-style Console"   KillModule             StartHiddenConsole

DestroyMenu MenuPageList
AddToMenu MenuPageList
+ "%workspaces/workspace-1.png%Desktop 1"   Pick MoveToPage 0 0
+ "%workspaces/workspace-2.png%Desktop 2"   Pick MoveToPage 1 0
+ "%workspaces/workspace-3.png%Desktop 3"   Pick MoveToPage 2 0
+ "%workspaces/workspace-4.png%Desktop 4"   Pick MoveToPage 0 1
+ "%workspaces/workspace-5.png%Desktop 5"   Pick MoveToPage 1 1
+ "%workspaces/workspace-6.png%Desktop 6"   Pick MoveToPage 2 1

# Task bar
Colorset 12 bg #979f9c, fg #001a19
Colorset 13 fg white, bg #523232, fgsh #191919, hi #8f8f8f, sh #454545

DestroyModuleConfig FvwmTaskBar: *
*FvwmTaskBar: Geometry +0-0
*FvwmTaskBar: Rows 1
*FvwmTaskBar: AutoStick
*FvwmTaskBar: UseSkipList
*FvwmTaskBar: PageOnly
*FvwmTaskBar: ShowTips
*FvwmTaskBar: NoBrightFocus
*FvwmTaskBar: 3DFvwm
*FvwmTaskBar: MailCheck 0
*FvwmTaskBar: ClockFormat %T [%d/%m/%y]
*FvwmTaskBar: WindowButtonsRightMargin 124
*FvwmTaskBar: Font "$[infostore.font_mono]"
*FvwmTaskBar: SelFont "$[infostore.font_mono]"
*FvwmTaskBar: StatusFont "$[infostore.font_mono]"
*FvwmTaskBar: TipsBack bisque
*FvwmTaskBar: TipsFore black
*FvwmTaskBar: Colorset 10
*FvwmTaskBar: FocusColorset 13
*FvwmTaskBar: UseIconNames
*FvwmTaskBar: StartName Start
*FvwmTaskBar: StartMenu MenuFvwmRoot mouse c -100m -60p

# Handle mouse bindings
# Mouse 0 is special to fvwm, meaning "any" mouse button

# Recall that mouse formats look like this:
# +------------+
# | ||  ||  || |
# |            |
# +------------+
#   1   2   3

#-----------------------------------------------------------------------
# Contexts:                                  Desktop
#     R = Root Window                 rrrrrrrrrrrrrrrrrrrrrr
#     W = Application Window          rIrrrrFSSSSSSSSSFrrrrr
#     F = Frame Corners               rrrrrrS13TTTT642Srrrrr
#     S = Frame Sides                 rIrrrrSwwwwwwwwwSrrrrr
#     T = Title Bar                   rrrrrrSwwwwwwwwwSrrrrr
#     I = Icon                        rIrrrrFSSSSSSSSSFrrrrr
#                                     rrrrrrrrrrrrrrrrrrrrrr
# Numbers are buttons: 1 3 5 7 9   0 8 6 4 2
#
# Modifiers: (A)ny, (C)ontrol, (S)hift, (M)eta, (N)othing
#-----------------------------------------------------------------------
# Buttons:
# +----------------------------------------------------------+
# | X  X  X  X  X                              X  X  X  X  X |
# +----------------------------------------------------------+
# | 1  3  5  7  9                              0  8  6  4  2 |
# |                                                          |
#

# Windows close,max,mini buttons
#     Button Context   Modifi  Function
Mouse 0      4          A      Iconify
Mouse 0      2          A      Maximize-func
Mouse 0      1          A      Close
Mouse 0      3          A      Menu Window-Ops Nop
Mouse 1      4          A      Iconify
Mouse 1      2          A      Maximize-func
Mouse 1      1          A      Close
Mouse 1      3          A      Menu Window-Ops Nop

# Main pop-up menus
#     Button Context   Modifi  Function
Mouse 3      R          N      Menu MenuFvwmRoot Nop
Mouse 3      R          A      Menu MenuFvwmRoot Nop
Mouse 2      R          N      WindowList

# When you click the edge of a window
#     Button Context   Modifi  Function
Mouse 1      F          A      Resize-or-Raise
Mouse 1      T          A      Move-or-Raise
Mouse 1      I          A      Move-or-Iconify
Mouse 2      T          A      WindowList
Mouse 3      T          A      Menu Window-Ops Nop

# Roll mouse wheel anywhere with Shift-Ctrl + cursor left/right for goto page
Mouse 4      A         SC      GotoPage +1p +0p
Mouse 5      A         SC      GotoPage -1p +0p

# Roll mouse wheel anywhere with Shift-Meta + cursor left/right for goto page
# with active window
Mouse 4      A         SM      MoveAndGotoPage +1p +0p
Mouse 5      A         SM      MoveAndGotoPage -1p +0p

# Handle key bindings
#   Keyname Context Modifi  Function
# Keyname is a standard X11 key name as defined in /usr/include/X11/keysymdef.h,
# (without the XK_ prefix), or the keysym database /usr/X11R6/lib/X11/XKeysymDB
# A=anywhere, C/M/S=control/meta/shift
# Modifier 4 is the left "Windows" key

# Key bindings using Alt + Fn
#   Keyname Context  Modifi Function
Key F1       A       M      Menu MenuFvwmRoot Nop
Key F2       A       M      Menu Window-Ops   Nop
Key F3       A       M      WindowList
Key F4       A       M      SendToModule FvwmProxy ShowToggle
Key F5       A       M      Move
Key F6       A       M      FvwmExpose
Key F10      A       M      Maximize-func

# Key Bindings: ctrl-arrow shifts viewports, alt-arrow shifts desktops
#   Keyname Context  Modifi Function
Key Left     A       C      GotoPage -1p +0p
Key Right    A       C      GotoPage +1p +0p
Key Up       A       C      GotoPage +0p -1p
Key Down     A       C      GotoPage +0p +1p
Key Left     A       M      GotoDesk -1  0 3
Key Right    A       M      GotoDesk 1   0 3
Key Up       A       M      GotoDesk -1  0 3
Key Down     A       M      GotoDesk 1   0 3

# Switch pages via keypad (no modifier)
#   Keyname  Context Modifi Function
Key KP_Home  A       N      GotoPageFocus 0 0
Key KP_Up    A       N      GotoPageFocus 1 0
Key KP_Prior A       N      GotoPageFocus 2 0
Key KP_Left  A       N      GotoPageFocus 0 1
Key KP_Begin A       N      GotoPageFocus 1 1
Key KP_Right A       N      GotoPageFocus 2 1
Key KP_End   A       N      GotoPageFocus 0 2
Key KP_Down  A       N      GotoPageFocus 1 2
Key KP_Next  A       N      GotoPageFocus 2 2

# Move windows to strategic points on the current page via shift-keypad
#   Keyname  Context Modifi Function
Key KP_Home  A       S      Move     0                   0
Key KP_End   A       S      Move     0                   -0
Key KP_Prior A       S      Move     -0                  0
Key KP_Next  A       S      Move     -0                  -0
Key KP_Up    A       S      Move     136p                0
Key KP_Down  A       S      Move     136p                -0
Key KP_Left  A       S      Move     136p                keep
Key KP_Right A       S      Move     -0                  keep
Key KP_Begin A       S      PipeRead 'fvwm_center_window $[vp.width] $[vp.height] $[w.width] $[w.height]'

# Move a window to a different page via alt-keypad
#   Keyname  Context Modifi Function
Key KP_Home  A       M      MoveToPage 0 0
Key KP_Up    A       M      MoveToPage 1 0
Key KP_Prior A       M      MoveToPage 2 0
Key KP_Left  A       M      MoveToPage 0 1
Key KP_Begin A       M      MoveToPage 1 1
Key KP_Right A       M      MoveToPage 2 1
Key KP_End   A       M      MoveToPage 0 2
Key KP_Down  A       M      MoveToPage 1 2
Key KP_Next  A       M      MoveToPage 2 2

# Move a window and follow it via ctrl-keypad
#   Keyname  Context Modifi Function
Key KP_Home  A       C      MoveAndGotoPage 0 0
Key KP_Up    A       C      MoveAndGotoPage 1 0
Key KP_Prior A       C      MoveAndGotoPage 2 0
Key KP_Left  A       C      MoveAndGotoPage 0 1
Key KP_Begin A       C      MoveAndGotoPage 1 1
Key KP_Right A       C      MoveAndGotoPage 2 1
Key KP_End   A       C      MoveAndGotoPage 0 2
Key KP_Down  A       C      MoveAndGotoPage 1 2
Key KP_Next  A       C      MoveAndGotoPage 2 2

####
# Mouse Gestures.
#
# Syntax reminder:
#
#   1   2   3
#
#   4   5   6
#
#   7   8   9
#
# Stroke Sequence Button Context Modifiers Function
#
# I use mouse gestures in Opera and Mozilla, so I've duplicated some common ones here.
#
# To try these out, hold down the Left mouse button and trace the pattern on the Root
# Window, the sequence is a pattern on the grid above, so 14789 would be down then Right.
#################

####
# First, define a StrokeFunc.
#
# Without this, you would have to execute all of your gestures entirely on the Root
# Window, This lets you change the Context and have a few other Neat Features, such as
# DrawMotion, which will draw a line as you make your Gesture (Neat!).
#
# There is also EchoSequence, Feedback and NotStayPressed.
#
# Note: EchoSequence prints sequences to STDERR.
#################
Mouse 1 R A     StrokeFunc DrawMotion FeedBack StrokeWidth 1

# Down, Then Up.
Stroke 25852 0 R N  Refresh

# Directions...
Stroke 456 0 R N    GotoPage +1p 0p
Stroke 654 0 R N    GotoPage -1p 0p
Stroke 852 0 R N    GotoPage 0p -1p
Stroke 258 0 R N    GotoPage 0p +1p

# Diagonal...
Stroke 159 0 R N    GotoPage +1p +1p
Stroke 951 0 R N    GotoPage -1p -1p
Stroke 357 0 R N    GotoPage -1p +1p
Stroke 753 0 R N    GotoPage +1p -1p

#####
# Quit
#
# Down, Then Right.
#
# Dont worry about running this gesture by accident,
# you will be asked to confirm
#################
Stroke 14789 0 R N  Module FvwmForm FvwmForm-QuitVerify

####
# Up, Then Down: Close a window.
#
# Note that you can also enter the sequence as it appears on your
# Numeric Keypad, by preceding the sequence with an `N`.
#
# The FVWM developers think of everything :)
#################
Stroke N25852 0 R N Pick Close

# Start a Web Browser
Stroke N1478963 0 R N Exec exec firefox

# Make a new Sticky Note
Stroke N1598753 0 R N Exec exec xpad

# Menu Style
Colorset 14 bg #979f9c, fg #001a19
Colorset 15 fg #ffffff, bg #6d6d6d
MenuStyle * Hilight3DThin, PopupOffset 0 100, PopupDelay 300, TitleWarpOff
MenuStyle * TitleUnderlines2, SeparatorsLong, TrianglesSolid, Animation
MenuStyle * BorderWidth 2
MenuStyle * PopupAsSubmenu, HoldSubmenus, SubmenusRight
MenuStyle * ItemFormat "%|%5.5i%1.3l%2.3>%|"
MenuStyle * VerticalItemSpacing 1 1, VerticalTitleSpacing 2 2
MenuStyle * MenuColorset 10, HilightBack, ActiveColorset 15
MenuStyle * "$[infostore.font_mono]"
MenuStyle * MenuFace DGradient 64 Red Black

Read Menu

# The following settings are interpreted by EMACS, do not remove them.
# Local Variables:
# mode: shell-script
# fill-column: 80
# coding: utf-8
# End:
